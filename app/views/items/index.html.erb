

<div class="container" >
  <ul class="nav justify-content-end nav-tabs">
    <li class="nav-item nav-link">
      ログインユーザー：<%= current_user.nickname %>
    </li> 
    <li class="nav-item">
      <%= link_to 'ログアウト', destroy_user_session_path , method: :delete, class: "nav-link" %>
    </li> 
  </ul>
</div>


<div class="container" >
  <%= form_with model: @item, local: true do |f| %>

    <%= render 'shared/error_messages', model: f.object %>
    <div class="form-group">
    <div class="form-row ">
        <div class="col">
          <%= f.text_field :name, placeholder:"商品名", maxlength:"20", class: "form-control " %>
        </div>
        <div class="col">
          <%= f.number_field :stock, placeholder:"在庫数 整数のみ", min:0, class: "form-control " %>
        </div>
        <div class="col">
          <%= f.number_field :price, placeholder:"価格", min:0, class: "form-control" %>
        </div>
        <div class="col">
          <%= f.collection_select(:category_id, Category.all, :id, :name, {}, class: "form-control ")%>
        </div>
        <div class="col">
          <%= f.submit "登録" ,class: "form-control btn btn-primary" %>
        </div>
    </div>
    </div>
  <% end %>
</div>


<div class="container" >
  <table class="table table-condensed table-hover">
    <thead class="thead-light">
      <tr>
        <th style="width:15%">区分</th>
        <th style="width:21%">品名</th>
        <th style="width:13%">在庫</th>
        <th style="width:13%">価格</th>
        <th style="width:9%"></th>
        <th style="width:9%"></th>
        <th style="width:10%"></th>
        <th style="width:10%"></th>
      </tr>
    </thead>
<div class="container" >
<% @items.each do |i| %>
<tbody>
<tr>
      <td><%= i.category.name %></td>
      <th><%= i.name %></th>
      <td><%= i.stock %></td>
      <td><%= i.price.to_s(:delimited) unless i.price.nil?%></td>
      <td>
        <%= link_to ' + ',updown_item_path(i.id,num: 1), class:"btn btn-primary px-4" %>
      </td>
      <td>
        <% unless i.stock == 0 %>
          <%= link_to ' − ',updown_item_path(i.id,num: -1), class:"btn btn-danger px-4" %>
        <% else %>
          <%= link_to ' − ',updown_item_path(i.id,num: -1), class:"btn btn-danger px-4 disabled" %>
        <% end %>
      </td>
      <td>
        <%= link_to '編集', edit_item_path(i.id), class:"btn btn-success px-3" %>
      </td>
      <td>
        <%= link_to '削除', item_path(i.id), method: :DELETE,
                    class:"btn btn-dark px-3", data: { confirm: "#{i.name}を削除しますか？" } %>
      </td>
</tr>
</tbody>
<% end %>
  </table>
</div>
